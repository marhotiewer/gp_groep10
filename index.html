<html>
	<head>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
		<title>Car Control</title>
	</head>
</html>

<script>

var aPressed = false;
var dPressed = false;

function steer(angle) {
	$.ajax({
		type: 'POST',
		url: 'http://192.168.1.203/steer',
		crossDomain: true,
		data: '{"angle":'+angle+'}',
		dataType: 'json',
		error: function (responseData, textStatus, errorThrown) {
			alert('POST failed.');
		}
	});
}

$(window).keydown(function(e) {
	var ev = e || window.event;
	var key = ev.keyCode || ev.which;

	if(key == 65 && !aPressed && !dPressed) {
		aPressed = true;
		steer(3);
	}
	else if(key == 68 && !dPressed && !aPressed) {
		dPressed = true;
		steer(23);
	}
});
$(window).keyup(function(e) {
	var ev = e || window.event;
	var key = ev.keyCode || ev.which;

	if(key == 65 && aPressed) {
		aPressed = false;
		steer(13);
	}
	else if(key == 68 && dPressed) {
		dPressed = false;
		steer(13);
	}
});
</script>
